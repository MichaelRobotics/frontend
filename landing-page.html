<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meeting Analysis System - AI-Powered Meeting Insights</title>
    <meta name="description" content="Transform meetings with AI-driven transcription, insights, and summaries for recorders, clients, and salespeople.">
    <meta property="og:title" content="Meeting Analysis System">
    <meta property="og:description" content="Unlock real-time transcription and AI insights to streamline decisions and boost productivity.">
    <meta property="og:image" content="https://placehold.co/1200x630/1e40af/ffffff?text=Meeting+Analysis+System"> <meta property="og:url" content="https://your-app-name.vercel.app/"> <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); /* Light blue/sky gradient for landing */
            --glass-opacity: 0.8;
            --main-accent-color: #2563eb; /* blue-600 */
            --secondary-accent-color: #0ea5e9; /* sky-500 */
        }
        body {
            font-family: 'Inter', sans-serif;
            overflow-x: hidden;
            background: var(--primary-gradient);
            color: #1f2937; /* gray-800 */
            line-height: 1.7;
        }
        @media (prefers-reduced-motion: reduce) {
            .animate-slide-in, .notification-show, .fade-in, .btn-hover, .icon-hover, .hero-bg::before, #particles {
                animation: none !important;
                transition: none !important;
                transform: none !important;
            }
        }
        .fade-in {
            animation: fadeIn 0.8s ease-out forwards;
            opacity: 0;
            animation-delay: calc(var(--delay, 0) * 0.1s);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        #notification-main.notification-show { animation: slideInRightMain 0.5s ease-out forwards; }
        #notification-main.notification-hide { animation: slideOutRightMain 0.5s ease-in forwards; }
        @keyframes slideInRightMain { from { transform: translateX(120%); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        @keyframes slideOutRightMain { from { transform: translateX(0); opacity: 1; } to { transform: translateX(120%); opacity: 0; } }
        
        .btn-hover { transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); }
        .btn-hover:hover { transform: translateY(-4px); box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15), 0 3px 6px rgba(0,0,0,0.1); }
        .btn-hover:active { transform: translateY(-1px) scale(0.98); box-shadow: 0 5px 10px rgba(0,0,0,0.1); }
        .icon-hover { transition: transform 0.3s ease; }
        .btn-hover:hover .icon-hover { transform: scale(1.15) rotate(5deg); }

        .glass-effect {
            background: rgba(255, 255, 255, var(--glass-opacity));
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.1);
        }
        .gradient-text {
            background: linear-gradient(to right, var(--main-accent-color), var(--secondary-accent-color));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
        }
        @media (prefers-contrast: high) { .gradient-text { background: none; color: var(--main-accent-color); } }
        
        .role-preview {
            visibility: hidden; opacity: 0; transition: all 0.3s ease; 
            position: absolute; bottom: 100%; left: 50%; 
            transform: translateX(-50%) translateY(10px); /* Initial state for animation */
            margin-bottom: 0.5rem; 
            background-color: #1f2937; /* gray-800 */ color: white; font-size: 0.75rem; 
            border-radius: 0.375rem; padding: 0.5rem 0.75rem; 
            width: max-content; max-width: 250px; text-align: center;
            pointer-events: none; 
            z-index: 20;
        }
        .role-preview::after { 
            content: ''; position: absolute; top: 100%; left: 50%;
            transform: translateX(-50%);
            border-width: 5px; border-style: solid;
            border-color: #1f2937 transparent transparent transparent;
        }
        .role-btn:hover .role-preview { visibility: visible; opacity: 1; transform: translateX(-50%) translateY(0); }

        .logo-svg path { transition: fill 0.3s ease; }
        .logo-svg:hover path { fill: var(--secondary-accent-color); }
        
        .feature-card, .step-card, .role-btn { transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .feature-card:hover, .step-card:hover, .role-btn:hover { transform: translateY(-6px); box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15), 0 4px 8px rgba(0,0,0,0.1); }
        
        .hero-bg { position: relative; overflow: hidden; }
        .hero-bg::before {
            content: ''; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
            background: radial-gradient(circle at 50% 50%, rgba(59, 130, 246, 0.1) 0%, rgba(14, 165, 233, 0.05) 35%, transparent 70%);
            animation: pulseBG 12s infinite ease-in-out; z-index: 0;
        }
        @keyframes pulseBG { 0%, 100% { transform: scale(0.9); opacity: 0.5; } 50% { transform: scale(1.1); opacity: 0.25; } }
        #particles { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; pointer-events: none; }
        
        .scroll-reveal { opacity: 0; transform: translateY(25px); transition: opacity 0.6s ease-out, transform 0.6s ease-out; }
        .scroll-reveal.visible { opacity: 1; transform: translateY(0); }
        
        .floating-cta {
            position: fixed; bottom: 1.5rem; right: 1.5rem; z-index: 50;
            opacity: 0; transform: translateY(20px) scale(0.9);
            transition: opacity 0.4s ease, transform 0.4s ease;
        }
        .floating-cta.visible { opacity: 1; transform: translateY(0) scale(1); }
        
        @media (max-width: 640px) {
            .role-btn, .auth-btn { width: 100%; padding: 0.85rem; }
            .role-preview { display: none !important; } 
            .hero-bg { padding-top: 3rem; padding-bottom: 2.5rem; }
            .hero-bg h2 { font-size: 2rem; line-height: 1.25; }
            .hero-bg p { font-size: 1rem; max-width: 90%; }
            section { padding-top: 2.5rem; padding-bottom: 2.5rem; }
            .glass-effect { padding: 1.25rem; --glass-opacity: 0.85; }
            #notification-main { bottom: 1rem; right: 1rem; left: 1rem; max-width: none; width: auto; }
        }
        @media (min-width: 640px) and (max-width: 768px) {
            .role-btn { min-width: calc(50% - 0.75rem); }
        }
        .password-toggle { position: absolute; right: 0.75rem; top: 50%; transform: translateY(-50%); cursor: pointer; color: #6b7280; padding: 0.25rem; }
        .input-valid { border-color: #10b981 !important; background-color: rgba(16,185,129,0.05); }
        .input-invalid { border-color: #ef4444 !important; background-color: rgba(239,68,68,0.05); }
        
        .tab-active { background: rgba(59, 130, 246, 0.1); color: var(--main-accent-color); font-weight: 600; border-bottom: 2px solid var(--main-accent-color); }
        .tab-btn { border-bottom: 2px solid transparent; padding-bottom: 0.5rem; }

        .client-access-modal-field { margin-bottom: 1rem; }
        .client-access-modal-field label { display: block; color: #4b5563; font-size: 0.875rem; font-weight: 500; margin-bottom: 0.25rem; }
        .client-access-modal-field input { width: 100%; padding: 0.65rem 0.75rem; background-color: rgba(255,255,255,0.7); border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 0.875rem; }
        .client-access-modal-field input:focus { outline: none; border-color: var(--main-accent-color); box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.2); }
    </style>
</head>
<body class="text-gray-800">
    <div class="min-h-screen flex flex-col">
        <header class="glass-effect shadow-lg sticky top-0 z-50 backdrop-blur-md bg-white/70">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3 sm:py-4 flex justify-between items-center">
                <a href="#" class="flex items-center space-x-2 sm:space-x-3" aria-label="Meeting Analysis System Home">
                    <svg class="logo-svg w-8 h-8 sm:w-10 sm:h-10" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                        <path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2Z" fill="#2563eb"/>
                        <path d="M12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6Z" fill="white"/>
                        <path d="M12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9Z" fill="#2563eb"/>
                    </svg>
                    <h1 class="text-lg sm:text-2xl font-bold tracking-tight gradient-text">MeetingAnalysis AI</h1>
                </a>
                <div id="user-controls" class="hidden items-center space-x-3 sm:space-x-4">
                    <span id="user-name" class="text-sm sm:text-base font-semibold text-gray-700 hidden sm:inline"></span>
                    <button id="logout-main-btn" class="bg-gradient-to-r from-red-500 to-pink-500 hover:from-red-600 hover:to-pink-600 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs sm:text-sm font-semibold btn-hover shadow-md">
                        Sign Out
                    </button>
                </div>
                <div id="auth-buttons-header" class="flex items-center space-x-2 sm:space-x-3">
                    <button id="login-header-btn" class="text-sm sm:text-base font-medium text-gray-600 hover:text-blue-600 transition-colors">Sign In</button>
                    <button id="register-header-btn" class="text-sm sm:text-base font-semibold text-white bg-gradient-to-r from-blue-500 to-sky-500 hover:from-blue-600 hover:to-sky-600 px-3 py-1.5 sm:px-4 sm:py-2 rounded-full btn-hover shadow-sm">Sign Up</button>
                </div>
            </div>
        </header>

        <section class="hero-bg py-16 sm:py-24 lg:py-32 text-center relative z-10">
            <canvas id="particles" aria-hidden="true"></canvas>
            <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10">
                <h2 class="text-4xl sm:text-5xl lg:text-6xl font-extrabold gradient-text mb-6 leading-tight tracking-tight fade-in" style="--delay: 0;">
                    Revolutionize Your Meetings with AI
                </h2>
                <p class="text-md sm:text-lg lg:text-xl text-gray-600 mb-10 font-medium tracking-wide max-w-3xl mx-auto fade-in" style="--delay: 0.1s;">
                    Transform conversations into actionable intelligence. Get real-time transcription, AI-driven insights, and tailored summaries for every role.
                </p>
                <div class="fade-in" style="--delay: 0.2s;">
                    <button id="cta-hero-btn" class="bg-gradient-to-r from-blue-600 to-sky-500 hover:from-blue-700 hover:to-sky-600 text-white px-8 py-3 sm:px-10 sm:py-4 rounded-full text-base sm:text-lg font-semibold btn-hover shadow-lg transform hover:scale-105">
                        Get Started Free
                    </button>
                </div>
            </div>
        </section>

        <section id="action-section" class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 sm:py-16 text-center">
            <div id="role-selection-area" class="w-full max-w-5xl glass-effect p-8 sm:p-12 rounded-3xl shadow-2xl mx-auto">
                <h2 class="text-3xl sm:text-4xl font-extrabold text-gray-900 mb-4 text-center leading-tight tracking-tight gradient-text fade-in" style="--delay: 0s">Choose Your Path</h2>
                <p class="text-center text-base sm:text-lg text-gray-600 mb-8 sm:mb-12 font-medium tracking-wide fade-in" style="--delay: 0.1s">Select a role to explore tailored AI insights or get started.</p>
                <div class="flex flex-col sm:flex-row flex-wrap justify-center items-stretch gap-6 sm:gap-8">
                    <div class="relative flex-1 min-w-[220px] max-w-[280px] flex flex-col">
                        <a href="#" data-role="recorder" class="role-btn flex flex-col items-center justify-center p-6 bg-gradient-to-br from-blue-400 to-sky-500 hover:from-blue-500 hover:to-sky-600 text-white rounded-2xl btn-hover shadow-lg fade-in h-full" style="--delay: 0.2s" role="button" aria-label="Select Recorder Role" tabindex="0">
                            <i class="fas fa-microphone-alt text-3xl mb-3 icon-hover"></i>
                            <span class="text-lg font-semibold tracking-wide">Recorder</span>
                            <span class="text-xs mt-1 opacity-80">Capture & manage recordings</span>
                        </a>
                        <div class="role-preview">Real-time audio capture, transcript management, and recording controls.</div>
                    </div>
                    <div class="relative flex-1 min-w-[220px] max-w-[280px] flex flex-col">
                        <a href="#" data-role="client" class="role-btn flex flex-col items-center justify-center p-6 bg-gradient-to-br from-green-400 to-emerald-500 hover:from-green-500 hover:to-emerald-600 text-white rounded-2xl btn-hover shadow-lg fade-in h-full" style="--delay: 0.3s" role="button" aria-label="Select Client Role" tabindex="0">
                            <i class="fas fa-users text-3xl mb-3 icon-hover"></i>
                            <span class="text-lg font-semibold tracking-wide">Client</span>
                            <span class="text-xs mt-1 opacity-80">View meeting insights</span>
                        </a>
                        <div class="role-preview">Personalized insights, meeting summaries, and decision tracking.</div>
                    </div>
                    <div class="relative flex-1 min-w-[220px] max-w-[280px] flex flex-col">
                        <a href="#" data-role="salesperson" class="role-btn flex flex-col items-center justify-center p-6 bg-gradient-to-br from-purple-400 to-violet-500 hover:from-purple-500 hover:to-violet-600 text-white rounded-2xl btn-hover shadow-lg fade-in h-full" style="--delay: 0.4s" role="button" aria-label="Select Salesperson Role" tabindex="0">
                            <i class="fas fa-user-tie text-3xl mb-3 icon-hover"></i>
                            <span class="text-lg font-semibold tracking-wide">Salesperson</span>
                            <span class="text-xs mt-1 opacity-80">Boost sales performance</span>
                        </a>
                        <div class="role-preview">Sales analysis, client need detection, and action items.</div>
                    </div>
                </div>
            </div>
        </section>

        <div id="auth-modal-overlay" class="fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[60] hidden transition-opacity duration-300 ease-in-out opacity-0">
            <div id="auth-modal-content" class="w-full max-w-md glass-effect p-6 sm:p-8 rounded-2xl shadow-2xl relative transform scale-95 opacity-0 transition-all duration-300 ease-out">
                <button id="auth-modal-close" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-2xl leading-none" aria-label="Close modal">&times;</button>
                <div class="flex justify-center mb-6 border-b border-gray-200">
                    <button id="login-tab-modal" class="tab-btn px-5 py-2.5 text-gray-700 font-semibold text-sm sm:text-base tab-active" aria-controls="login-form-modal" aria-selected="true">Sign In</button>
                    <button id="register-tab-modal" class="tab-btn px-5 py-2.5 text-gray-700 font-semibold text-sm sm:text-base" aria-controls="register-form-modal" aria-selected="false">Sign Up</button>
                </div>
                <form id="login-form-modal" class="space-y-5">
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-1 text-center">Welcome Back!</h2>
                    <p class="text-center text-sm text-gray-600 mb-5">Sign in to access your dashboard.</p>
                    <div>
                        <label for="login-email-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Email Address</label>
                        <input type="email" id="login-email-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="you@example.com" required autocomplete="email">
                    </div>
                    <div class="relative">
                        <label for="login-password-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Password</label>
                        <input type="password" id="login-password-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="••••••••" required autocomplete="current-password">
                        <i class="fas fa-eye password-toggle" data-target="login-password-modal" aria-label="Show password"></i>
                    </div>
                    <button id="login-submit-modal" type="submit" class="w-full bg-gradient-to-r from-blue-600 to-sky-500 hover:from-blue-700 hover:to-sky-600 text-white p-3 rounded-lg font-semibold text-sm btn-hover shadow-md">Sign In</button>
                    <button type="button" id="forgot-password-modal" class="block text-blue-600 hover:text-blue-700 text-xs sm:text-sm font-medium text-center w-full mt-3 transition-colors">Forgot Password?</button>
                </form>
                <form id="register-form-modal" class="space-y-5 hidden">
                    <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-1 text-center">Create Your Account</h2>
                    <p class="text-center text-sm text-gray-600 mb-5">Join the AI meeting revolution.</p>
                    <div>
                        <label for="register-name-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Full Name (Optional)</label>
                        <input type="text" id="register-name-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="Your Name" autocomplete="name">
                    </div>
                    <div>
                        <label for="register-email-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Email Address</label>
                        <input type="email" id="register-email-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="you@example.com" required autocomplete="email">
                    </div>
                    <div class="relative">
                        <label for="register-password-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Password</label>
                        <input type="password" id="register-password-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="Minimum 8 characters" required autocomplete="new-password">
                        <i class="fas fa-eye password-toggle" data-target="register-password-modal" aria-label="Show password"></i>
                    </div>
                    <div class="relative">
                        <label for="register-confirm-password-modal" class="block text-gray-700 text-sm font-semibold mb-1.5">Confirm Password</label>
                        <input type="password" id="register-confirm-password-modal" class="w-full p-3 bg-white/60 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-colors text-sm placeholder-gray-500" placeholder="Re-enter password" required autocomplete="new-password">
                        <i class="fas fa-eye password-toggle" data-target="register-confirm-password-modal" aria-label="Show password"></i>
                    </div>
                    <button id="register-submit-modal" type="submit" class="w-full bg-gradient-to-r from-teal-500 to-cyan-500 hover:from-teal-600 hover:to-cyan-600 text-white p-3 rounded-lg font-semibold text-sm btn-hover shadow-md">Create Account</button>
                </form>
                <p id="auth-error-modal" class="hidden text-red-500 text-xs sm:text-sm text-center mt-4 font-medium" aria-live="polite"></p>
            </div>
        </div>
        
        <div id="client-access-modal-overlay" class="fixed inset-0 bg-black bg-opacity-50 backdrop-blur-sm flex items-center justify-center p-4 z-[60] hidden transition-opacity duration-300 ease-in-out opacity-0">
            <div id="client-access-modal-content" class="w-full max-w-md glass-effect p-6 sm:p-8 rounded-2xl shadow-2xl relative transform scale-95 opacity-0 transition-all duration-300 ease-out">
                <button id="client-access-modal-close" class="absolute top-3 right-3 text-gray-500 hover:text-gray-700 text-2xl leading-none" aria-label="Close modal">&times;</button>
                <h2 class="text-xl sm:text-2xl font-bold text-gray-800 mb-5 text-center">Access Meeting Analysis</h2>
                <form id="client-access-form-modal" class="space-y-4">
                    <div class="client-access-modal-field">
                        <label for="client-meeting-id-modal">Meeting ID</label>
                        <input type="text" id="client-meeting-id-modal" placeholder="Enter Meeting ID" required>
                    </div>
                    <div class="client-access-modal-field">
                        <label for="client-access-code-modal">Access Code</label>
                        <input type="text" id="client-access-code-modal" placeholder="Enter Client Access Code" required>
                    </div>
                    <button id="client-access-submit-modal" type="submit" class="w-full bg-gradient-to-r from-green-500 to-emerald-500 hover:from-green-600 hover:to-emerald-600 text-white p-3 rounded-lg font-semibold text-sm btn-hover shadow-md">View Analysis</button>
                </form>
                <p id="client-access-error-modal" class="hidden text-red-500 text-xs sm:text-sm text-center mt-3 font-medium"></p>
            </div>
        </div>

        <section class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-20 scroll-reveal bg-white/10 rounded-3xl">
            <h3 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-12 sm:mb-16 text-center leading-tight tracking-tight fade-in" style="--delay: 0s">
                <span class="gradient-text">Simple Steps</span> to Powerful Insights
            </h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-10">
                <div class="step-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.1s">
                    <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-blue-100 to-sky-100 text-blue-600 mb-5 shadow-inner">
                        <span class="text-xl sm:text-2xl font-bold">1</span>
                    </div>
                    <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">Record or Upload</h4>
                    <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Easily capture audio with our in-browser recorder or upload existing meeting files.</p>
                </div>
                <div class="step-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.2s">
                    <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-green-100 to-emerald-100 text-green-600 mb-5 shadow-inner">
                        <span class="text-xl sm:text-2xl font-bold">2</span>
                    </div>
                    <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">AI-Powered Analysis</h4>
                    <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Our advanced AI transcribes, summarizes, and extracts key insights in minutes.</p>
                </div>
                <div class="step-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.3s">
                    <div class="flex items-center justify-center w-12 h-12 sm:w-14 sm:h-14 rounded-full bg-gradient-to-br from-purple-100 to-violet-100 text-purple-600 mb-5 shadow-inner">
                        <span class="text-xl sm:text-2xl font-bold">3</span>
                    </div>
                    <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">Access & Share</h4>
                    <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Review role-specific dashboards, ask questions, and securely share insights.</p>
                </div>
            </div>
        </section>

        <section class="bg-white/50 py-16 sm:py-20 scroll-reveal">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <h3 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-12 sm:mb-16 text-center leading-tight tracking-tight fade-in" style="--delay: 0s">
                    Why <span class="gradient-text">MeetingAnalysis AI</span>?
                </h3>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 sm:gap-10">
                    <div class="feature-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.1s">
                        <i class="fas fa-brain text-3xl sm:text-4xl text-blue-500 mb-5 icon-hover"></i>
                        <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">Intelligent Insights</h4>
                        <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Go beyond transcripts. Get summaries, action items, sentiment analysis, and more.</p>
                    </div>
                    <div class="feature-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.2s">
                        <i class="fas fa-users-cog text-3xl sm:text-4xl text-green-500 mb-5 icon-hover"></i>
                        <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">Role-Based Views</h4>
                        <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Tailored dashboards for Salespeople, Clients, and Recorders ensure relevant information.</p>
                    </div>
                    <div class="feature-card glass-effect p-6 sm:p-8 rounded-2xl shadow-lg fade-in flex flex-col items-center text-center" style="--delay: 0.3s">
                        <i class="fas fa-shield-alt text-3xl sm:text-4xl text-purple-500 mb-5 icon-hover"></i>
                        <h4 class="text-lg sm:text-xl font-semibold text-gray-800 mb-3 tracking-tight">Secure & Private</h4>
                        <p class="text-gray-600 text-sm sm:text-base font-medium tracking-wide">Your data is protected with robust security measures and privacy controls.</p>
                    </div>
                </div>
            </div>
        </section>

        <footer class="bg-gradient-to-r from-gray-800 via-gray-900 to-black text-white py-10 sm:py-16">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
                <div class="flex justify-center mb-6">
                    <svg class="logo-svg w-10 h-10 sm:w-12 sm:h-12" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-label="Meeting Analysis System Footer Logo">
                        <path d="M12 2C17.5228 2 22 6.47715 22 12C22 17.5228 17.5228 22 12 22C6.47715 22 2 17.5228 2 12C2 6.47715 6.47715 2 12 2Z" fill="#60a5fa"/>
                        <path d="M12 6C15.3137 6 18 8.68629 18 12C18 15.3137 15.3137 18 12 18C8.68629 18 6 15.3137 6 12C6 8.68629 8.68629 6 12 6Z" fill="white"/>
                        <path d="M12 9C13.6569 9 15 10.3431 15 12C15 13.6569 13.6569 15 12 15C10.3431 15 9 13.6569 9 12C9 10.3431 10.3431 9 12 9Z" fill="#60a5fa"/>
                    </svg>
                </div>
                <p class="text-base sm:text-lg font-semibold tracking-wide mb-2">MeetingAnalysis AI</p>
                <p class="text-sm text-gray-400 mb-6">Transforming conversations into clarity.</p>
                <p class="text-xs text-gray-500">&copy; <span id="current-year">2025</span> Meeting Analysis System. All rights reserved.</p>
                 <p class="mt-3 text-gray-500 text-xs">
                    For support, contact: <a href="mailto:support@meetinganalysis.ai" class="hover:text-sky-400 transition-colors duration-300">support@meetinganalysis.ai</a>
                </p>
            </div>
        </footer>

        <div id="notification-main" class="fixed bottom-5 right-5 max-w-sm glass-effect rounded-xl shadow-xl p-4 z-[100] hidden transform transition-all duration-300 ease-out opacity-0 translate-x-full">
            <div class="flex items-start">
                <div id="notification-icon-main" class="w-7 h-7 flex items-center justify-center rounded-full mr-3 text-white">
                    <i class="fas fa-info-circle text-base"></i>
                </div>
                <p id="notification-message-main" class="text-sm text-gray-700 font-medium flex-grow" aria-live="assertive"></p>
                <button id="notification-close-main" class="ml-3 text-gray-400 hover:text-gray-600 transition-colors" aria-label="Close Notification">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>
        </div>

        <button id="floating-cta-main" class="floating-cta bg-gradient-to-r from-blue-600 to-sky-500 text-white px-5 py-2.5 sm:px-6 sm:py-3 rounded-full font-semibold text-sm btn-hover shadow-xl hidden items-center" aria-label="Get Started">
            <i class="fas fa-rocket mr-2"></i>Get Started
        </button>
    </div>

    <script>
    // This landing page script is self-contained for its UI interactions and auth simulation.
    // It will redirect to other HTML pages for the main app.
    document.addEventListener('DOMContentLoaded', () => {
        // --- Global State & Config for Landing Page ---
        let isLoggedIn = false; 
        let currentUser = null; 
        const USER_STORAGE_KEY = 'meetingAnalysisUser'; // Consistent with SharedAppLogic

        // --- DOM Elements ---
        const userControls = document.getElementById('user-controls');
        const userNameDisplay = document.getElementById('user-name');
        const logoutMainBtn = document.getElementById('logout-main-btn');
        const authButtonsHeader = document.getElementById('auth-buttons-header');
        const loginHeaderBtn = document.getElementById('login-header-btn');
        const registerHeaderBtn = document.getElementById('register-header-btn');

        const roleSelectionArea = document.getElementById('role-selection-area');
        const ctaHeroBtn = document.getElementById('cta-hero-btn');

        const authModalOverlay = document.getElementById('auth-modal-overlay');
        const authModalContent = document.getElementById('auth-modal-content');
        const authModalCloseBtn = document.getElementById('auth-modal-close');
        const loginTabModal = document.getElementById('login-tab-modal');
        const registerTabModal = document.getElementById('register-tab-modal');
        const loginFormModal = document.getElementById('login-form-modal');
        const registerFormModal = document.getElementById('register-form-modal');
        const authErrorModal = document.getElementById('auth-error-modal');

        const clientAccessModalOverlay = document.getElementById('client-access-modal-overlay');
        const clientAccessModalContent = document.getElementById('client-access-modal-content');
        const clientAccessModalCloseBtn = document.getElementById('client-access-modal-close');
        const clientAccessFormModal = document.getElementById('client-access-form-modal');
        const clientAccessErrorModal = document.getElementById('client-access-error-modal');

        const notificationMain = document.getElementById('notification-main');
        const notificationMessageMain = document.getElementById('notification-message-main');
        const notificationIconMain = document.getElementById('notification-icon-main');
        const notificationCloseMain = document.getElementById('notification-close-main');
        let notificationTimeout;

        const floatingCtaMain = document.getElementById('floating-cta-main');
        const heroSection = document.querySelector('.hero-bg');

        // --- UI Update Functions ---
        function updateLoginStateUI() {
            if (isLoggedIn && currentUser) {
                userControls.classList.remove('hidden');
                userControls.classList.add('flex');
                userNameDisplay.textContent = `Hi, ${currentUser.name || currentUser.email.split('@')[0]}!`;
                authButtonsHeader.classList.add('hidden');
                authButtonsHeader.classList.remove('flex');
            } else {
                userControls.classList.add('hidden');
                userControls.classList.remove('flex');
                authButtonsHeader.classList.remove('hidden');
                authButtonsHeader.classList.add('flex');
            }
            roleSelectionArea.classList.remove('hidden'); 
        }

        // --- Notification Handling (Landing Page Specific) ---
        function showAppNotification(message, type = 'info', duration = 5000) {
            if (notificationTimeout) clearTimeout(notificationTimeout);
            if (!notificationMessageMain || !notificationIconMain || !notificationMain) return; // Guard
            notificationMessageMain.textContent = message;
            let iconClass = 'fa-info-circle';
            let bgColor = 'bg-blue-500'; 
            if (type === 'success') { iconClass = 'fa-check-circle'; bgColor = 'bg-green-500'; }
            else if (type === 'error') { iconClass = 'fa-exclamation-circle'; bgColor = 'bg-red-500'; }
            else if (type === 'warning') { iconClass = 'fa-exclamation-triangle'; bgColor = 'bg-yellow-500'; }
            
            notificationIconMain.className = `w-7 h-7 flex items-center justify-center rounded-full mr-3 text-white ${bgColor}`;
            notificationIconMain.innerHTML = `<i class="fas ${iconClass} text-base"></i>`;
            
            notificationMain.classList.remove('hidden', 'opacity-0', 'translate-x-full', 'notification-hide');
            notificationMain.classList.add('notification-show', 'opacity-100');
            notificationTimeout = setTimeout(() => hideAppNotification(), duration);
        }
        function hideAppNotification() {
            if (!notificationMain) return;
            notificationMain.classList.remove('notification-show', 'opacity-100');
            notificationMain.classList.add('notification-hide');
            setTimeout(() => {
                if (notificationMain) notificationMain.classList.add('hidden', 'opacity-0', 'translate-x-full');
            }, 500);
        }
        if(notificationCloseMain) notificationCloseMain.addEventListener('click', hideAppNotification);

        // --- Auth Modal Logic ---
        function openAuthModal(defaultTab = 'login', pendingRole = null) {
            if (pendingRole) { localStorage.setItem('pendingRole', pendingRole); }
            if (!authModalOverlay || !authModalContent) return;
            authModalOverlay.classList.remove('hidden');
            requestAnimationFrame(() => { 
                authModalOverlay.classList.add('opacity-100');
                authModalContent.classList.remove('opacity-0', 'scale-95');
                authModalContent.classList.add('opacity-100', 'scale-100');
            });
            switchAuthModalTab(defaultTab);
            if(authErrorModal) {
                authErrorModal.classList.add('hidden');
                authErrorModal.textContent = '';
            }
        }
        function closeAuthModal() {
            if (!authModalOverlay || !authModalContent) return;
            authModalOverlay.classList.remove('opacity-100');
            authModalContent.classList.remove('opacity-100', 'scale-100');
            authModalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => { authModalOverlay.classList.add('hidden'); }, 300); 
            localStorage.removeItem('pendingRole');
        }
        function switchAuthModalTab(tabName) {
            if (!loginFormModal || !registerFormModal || !loginTabModal || !registerTabModal || !authErrorModal) return;
            if (tabName === 'login') {
                loginFormModal.classList.remove('hidden');
                registerFormModal.classList.add('hidden');
                loginTabModal.classList.add('tab-active');
                loginTabModal.setAttribute('aria-selected', 'true');
                registerTabModal.classList.remove('tab-active');
                registerTabModal.setAttribute('aria-selected', 'false');
            } else {
                registerFormModal.classList.remove('hidden');
                loginFormModal.classList.add('hidden');
                registerTabModal.classList.add('tab-active');
                registerTabModal.setAttribute('aria-selected', 'true');
                loginTabModal.classList.remove('tab-active');
                loginTabModal.setAttribute('aria-selected', 'false');
            }
            authErrorModal.classList.add('hidden');
            authErrorModal.textContent = '';
        }
        
        // --- Client Access Modal Logic ---
        function openClientAccessModal() {
            if (!clientAccessModalOverlay || !clientAccessModalContent || !clientAccessFormModal) return;
            clientAccessModalOverlay.classList.remove('hidden');
             requestAnimationFrame(() => {
                clientAccessModalOverlay.classList.add('opacity-100');
                clientAccessModalContent.classList.remove('opacity-0', 'scale-95');
                clientAccessModalContent.classList.add('opacity-100', 'scale-100');
            });
            if(clientAccessErrorModal) clientAccessErrorModal.classList.add('hidden');
            if(clientAccessErrorModal) clientAccessErrorModal.textContent = '';
            clientAccessFormModal.reset();
        }
        function closeClientAccessModal() {
            if (!clientAccessModalOverlay || !clientAccessModalContent) return;
            clientAccessModalOverlay.classList.remove('opacity-100');
            clientAccessModalContent.classList.remove('opacity-100', 'scale-100');
            clientAccessModalContent.classList.add('opacity-0', 'scale-95');
            setTimeout(() => { clientAccessModalOverlay.classList.add('hidden'); }, 300);
        }

        // --- Event Listeners for Modals ---
        if(loginHeaderBtn) loginHeaderBtn.addEventListener('click', () => openAuthModal('login'));
        if(registerHeaderBtn) registerHeaderBtn.addEventListener('click', () => openAuthModal('register'));
        if(ctaHeroBtn) {
            ctaHeroBtn.addEventListener('click', () => {
                if (isLoggedIn) { 
                    if (roleSelectionArea) roleSelectionArea.scrollIntoView({ behavior: 'smooth' }); 
                } else { openAuthModal('register'); }
            });
        }
        if(authModalCloseBtn) authModalCloseBtn.addEventListener('click', closeAuthModal);
        if(authModalOverlay) authModalOverlay.addEventListener('click', (e) => { if (e.target === authModalOverlay) closeAuthModal(); });
        if(loginTabModal) loginTabModal.addEventListener('click', () => switchAuthModalTab('login'));
        if(registerTabModal) registerTabModal.addEventListener('click', () => switchAuthModalTab('register'));
        
        if(clientAccessModalCloseBtn) clientAccessModalCloseBtn.addEventListener('click', closeClientAccessModal);
        if(clientAccessModalOverlay) clientAccessModalOverlay.addEventListener('click', (e) => { if (e.target === clientAccessModalOverlay) closeClientAccessModal(); });

        // --- Password Toggle ---
        document.querySelectorAll('.password-toggle').forEach(toggle => {
            toggle.addEventListener('click', () => {
                const targetId = toggle.dataset.target;
                const passwordInput = document.getElementById(targetId);
                if (passwordInput) {
                    const isPassword = passwordInput.type === 'password';
                    passwordInput.type = isPassword ? 'text' : 'password';
                    toggle.classList.toggle('fa-eye', isPassword);
                    toggle.classList.toggle('fa-eye-slash', !isPassword);
                }
            });
        });
        
        // --- Simulated Auth & Client Access Logic with Redirection ---
        async function handleLogin(email, password) { 
            if (!email || !password) { if(authErrorModal){authErrorModal.textContent = 'Please enter email and password.'; authErrorModal.classList.remove('hidden');} return; }
            if (password.length < 6) { if(authErrorModal){authErrorModal.textContent = 'Password must be at least 6 characters.'; authErrorModal.classList.remove('hidden');} return; }
            
            // In a real app, call SharedAppLogic.loginAPI()
            // For this landing page demo, we directly simulate and set localStorage
            if (email.toLowerCase() === "test@example.com" && password === "password123") { 
                currentUser = { name: email.split('@')[0], email: email.toLowerCase(), role: 'salesperson' }; 
                isLoggedIn = true;
                localStorage.setItem(USER_STORAGE_KEY, JSON.stringify(currentUser));
                localStorage.setItem('authToken', "simulated_jwt_token_for_" + email.toLowerCase()); 
                updateLoginStateUI(); 
                closeAuthModal();
                showAppNotification(`Welcome back, ${currentUser.name}!`, 'success');
                
                const pendingRole = localStorage.getItem('pendingRole');
                if (pendingRole && (pendingRole === 'salesperson' || pendingRole === 'recorder')) {
                    showAppNotification(`Redirecting to app dashboard...`, 'info', 2000);
                    localStorage.removeItem('pendingRole');
                    setTimeout(() => { window.location.href = 'app-main-dashboard.html'; }, 2000);
                } else {
                    if(roleSelectionArea) setTimeout(() => { roleSelectionArea.scrollIntoView({ behavior: 'smooth' }); }, 500);
                }
            } else {
                 if(authErrorModal){authErrorModal.textContent = 'Invalid credentials (simulated).'; authErrorModal.classList.remove('hidden');}
            }
        }
        async function handleRegister(email, password, confirmPassword, name) { 
            if (!email || !password || !confirmPassword) { if(authErrorModal){authErrorModal.textContent = 'Please fill all fields.'; authErrorModal.classList.remove('hidden');} return; }
            if (password !== confirmPassword) { if(authErrorModal){authErrorModal.textContent = 'Passwords do not match.'; authErrorModal.classList.remove('hidden');} return; }
            if (password.length < 8) { if(authErrorModal){authErrorModal.textContent = 'Password must be at least 8 characters.'; authErrorModal.classList.remove('hidden');} return; }
            
            currentUser = { name: name || email.split('@')[0], email: email.toLowerCase(), role: 'salesperson' };
            isLoggedIn = true;
            localStorage.setItem(USER_STORAGE_KEY, JSON.stringify(currentUser));
            localStorage.setItem('authToken', "simulated_jwt_token_for_" + email.toLowerCase()); 
            updateLoginStateUI(); 
            closeAuthModal();
            showAppNotification(`Account created for ${currentUser.name}! Welcome!`, 'success');
            
            const pendingRole = localStorage.getItem('pendingRole');
             if (pendingRole && (pendingRole === 'salesperson' || pendingRole === 'recorder')) {
                showAppNotification(`Redirecting to app dashboard...`, 'info', 2000);
                localStorage.removeItem('pendingRole');
                setTimeout(() => { window.location.href = 'app-main-dashboard.html'; }, 2000);
            } else {
                if(roleSelectionArea) setTimeout(() => { roleSelectionArea.scrollIntoView({ behavior: 'smooth' }); }, 500);
            }
        }
        function handleLogout() {
            currentUser = null; isLoggedIn = false;
            localStorage.removeItem(USER_STORAGE_KEY);
            localStorage.removeItem('authToken');
            localStorage.removeItem('pendingRole'); 
            updateLoginStateUI(); 
            showAppNotification('You have been signed out.', 'info');
        }
        function handleClientAccessSubmit(meetingId, accessCode) {
            if (!meetingId || !accessCode) {
                if(clientAccessErrorModal){
                    clientAccessErrorModal.textContent = 'Meeting ID and Access Code are required.';
                    clientAccessErrorModal.classList.remove('hidden');
                }
                return;
            }
            showAppNotification(`Attempting to access Meeting ID: ${meetingId}...`, 'info', 1500);
            setTimeout(() => {
                window.location.href = `client.html?meetingId=${encodeURIComponent(meetingId)}&accessCode=${encodeURIComponent(accessCode)}`;
            }, 1500);
            closeClientAccessModal();
        }

        if(loginFormModal) loginFormModal.addEventListener('submit', (e) => { e.preventDefault(); if(authErrorModal) authErrorModal.classList.add('hidden'); handleLogin(document.getElementById('login-email-modal').value, document.getElementById('login-password-modal').value); });
        if(registerFormModal) registerFormModal.addEventListener('submit', (e) => { e.preventDefault(); if(authErrorModal) authErrorModal.classList.add('hidden'); handleRegister(document.getElementById('register-email-modal').value, document.getElementById('register-password-modal').value, document.getElementById('register-confirm-password-modal').value, document.getElementById('register-name-modal').value); });
        if(logoutMainBtn) logoutMainBtn.addEventListener('click', handleLogout);
        if(clientAccessFormModal) {
            clientAccessFormModal.addEventListener('submit', (e) => {
                e.preventDefault();
                if(clientAccessErrorModal) clientAccessErrorModal.classList.add('hidden');
                const meetingId = document.getElementById('client-meeting-id-modal').value;
                const accessCode = document.getElementById('client-access-code-modal').value;
                handleClientAccessSubmit(meetingId, accessCode);
            });
        }

        // --- Role Button Navigation ---
        document.querySelectorAll('#role-selection-area .role-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                e.preventDefault();
                const role = btn.dataset.role;
                if (role === 'client') {
                    openClientAccessModal();
                } else if (isLoggedIn) {
                    showAppNotification(`Redirecting to app dashboard...`, 'info', 1500);
                    setTimeout(() => { window.location.href = 'app-main-dashboard.html'; }, 1500);
                } else {
                    openAuthModal('login', role); 
                }
            });
        });

        // --- Particle Animation ---
        const particlesCanvas = document.getElementById('particles');
        if (particlesCanvas && typeof particlesCanvas.getContext === 'function') {
            const ctx = particlesCanvas.getContext('2d');
            let particlesArray = [];
            function resizeCanvas() { if(!particlesCanvas) return; particlesCanvas.width = particlesCanvas.offsetWidth; particlesCanvas.height = particlesCanvas.offsetHeight; }
            
            if (particlesCanvas.offsetWidth > 0 && particlesCanvas.offsetHeight > 0) {
                resizeCanvas(); 
            } else { 
                setTimeout(resizeCanvas, 100);
            }

            class Particle { 
                constructor() { this.x = Math.random() * particlesCanvas.width; this.y = Math.random() * particlesCanvas.height; this.size = Math.random() * 2 + 0.5; this.speedX = (Math.random() * 0.4 - 0.2) * 0.5; this.speedY = (Math.random() * 0.4 - 0.2) * 0.5; this.opacity = Math.random() * 0.5 + 0.2; }
                update() { this.x += this.speedX; this.y += this.speedY; if (this.x > particlesCanvas.width || this.x < 0) this.speedX *= -1; if (this.y > particlesCanvas.height || this.y < 0) this.speedY *= -1; }
                draw() { ctx.fillStyle = `rgba(59, 130, 246, ${this.opacity})`; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); }
            }
            function initParticles() {
                if (!particlesCanvas || particlesCanvas.width === 0 || particlesCanvas.height === 0) return;
                particlesArray = []; const numParticles = Math.floor(particlesCanvas.width * particlesCanvas.height / 15000);
                for (let i = 0; i < Math.min(numParticles, 75); i++) { particlesArray.push(new Particle()); }
            }
            function animateParticles() { 
                if (!ctx || !particlesCanvas || particlesCanvas.width === 0 || particlesCanvas.height === 0) {
                    requestAnimationFrame(animateParticles); 
                    return;
                }
                ctx.clearRect(0, 0, particlesCanvas.width, particlesCanvas.height); 
                particlesArray.forEach(p => { p.update(); p.draw(); }); 
                requestAnimationFrame(animateParticles); 
            }
            
            let resizeTimeout; 
            window.addEventListener('resize', () => { 
                clearTimeout(resizeTimeout); 
                resizeTimeout = setTimeout(() => { 
                    if (particlesCanvas.offsetWidth > 0 && particlesCanvas.offsetHeight > 0) {
                        resizeCanvas(); 
                        initParticles(); 
                    }
                }, 100); 
            });
            
            if (particlesCanvas.offsetWidth > 0 && particlesCanvas.offsetHeight > 0) {
                initParticles();
                if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) { animateParticles(); }
            } else {
                 setTimeout(() => {
                    if (particlesCanvas.offsetWidth > 0 && particlesCanvas.offsetHeight > 0) {
                         initParticles();
                         if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) { animateParticles(); }
                    }
                 }, 200); 
            }
        }

        // --- Floating CTA Logic ---
        const ctaThreshold = heroSection ? heroSection.offsetHeight * 0.7 : 300;
        window.addEventListener('scroll', () => { 
            if (floatingCtaMain) { 
                floatingCtaMain.classList.toggle('hidden', window.scrollY <= ctaThreshold); 
                floatingCtaMain.classList.toggle('visible', window.scrollY > ctaThreshold);
            } 
        });
        if (floatingCtaMain) {
            floatingCtaMain.addEventListener('click', () => {
                if(isLoggedIn) { 
                    if(roleSelectionArea) roleSelectionArea.scrollIntoView({ behavior: 'smooth' }); 
                } else { openAuthModal('register'); }
            });
        }

        // --- Scroll Reveal ---
        const scrollRevealElements = document.querySelectorAll('.scroll-reveal');
        if (typeof IntersectionObserver !== 'undefined') {
            const revealObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) { entry.target.classList.add('visible'); revealObserver.unobserve(entry.target); } });
            }, { threshold: 0.1 });
            scrollRevealElements.forEach(el => revealObserver.observe(el));
        } else { 
            scrollRevealElements.forEach(el => el.classList.add('visible'));
        }
        
        // --- Final UI Setup ---
        const currentYearSpan = document.getElementById('current-year');
        if (currentYearSpan) currentYearSpan.textContent = new Date().getFullYear();
        
        const storedUser = localStorage.getItem(USER_STORAGE_KEY);
        if (storedUser) { 
            try {
                currentUser = JSON.parse(storedUser); 
                isLoggedIn = true; 
                const storedToken = localStorage.getItem('authToken');
                if (!storedToken) { // If user object exists but no token, clear session
                    isLoggedIn = false; currentUser = null;
                    localStorage.removeItem(USER_STORAGE_KEY);
                }
            } catch(e) {
                console.error("Error parsing stored user data:", e);
                localStorage.removeItem(USER_STORAGE_KEY); 
                localStorage.removeItem('authToken');
            }
        }
        updateLoginStateUI();
    });
    </script>
</body>
</html>
